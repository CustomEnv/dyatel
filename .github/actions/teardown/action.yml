name: 'Teardown'
description: 'Handle test results and upload artifacts'

inputs:
  browser-name:
    description: 'Browser name used in tests'
    required: true
  tox-env:
    description: 'Tox environment variable'
    required: true
  engine:
    description: 'Tests engine'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Upload Allure Report as Artifact
      uses: actions/upload-artifact@v4
      with:
        name: allure-report-${{ inputs.browser-name }}-${{ inputs.engine }}-${{ inputs.tox-env }}
        path: allure-report
        retention-days: 1

    - name: Check Test Results
      shell: bash
      run: |
        echo "‚ùå Tests failed! Please check the pytest output in the step above for details."
        exit 1
